# 飞牛OS构建指南

本文档提供了如何在飞牛OS（或Linux环境）下构建文件处理工具的详细步骤。

## 前提条件

在开始构建之前，请确保您已具备以下条件：

1. 飞牛OS环境或Linux系统
2. Python 3.6或更高版本已安装
3. 已安装pip包管理器
4. Git（用于克隆仓库，可选）

## 步骤1：准备项目文件

将项目文件夹复制到您的飞牛OS环境中。可以通过以下方式之一：

- 使用NAS的文件共享功能
- 使用SFTP工具上传
- 使用Git克隆（如果项目已托管在Git仓库）

## 步骤2：安装依赖

在飞牛OS的终端中，导航到项目目录，然后执行以下命令安装所需的Python依赖：

```bash
cd /path/to/fsdownload
pip install -r requirements.txt
pip install pyinstaller  # 安装打包工具
```

## 步骤3：安装系统工具

安装7-Zip和FFmpeg，它们是应用程序所需的系统工具：

对于基于Debian/Ubuntu的系统（假设飞牛OS基于此）：

```bash
sudo apt-get update
sudo apt-get install -y p7zip-full ffmpeg
```

对于基于CentOS/RHEL的系统：

```bash
sudo yum install -y p7zip ffmpeg
```

## 步骤4：执行构建脚本

在项目目录中运行我们提供的Linux构建脚本：

```bash
python build_linux.py
```

## 步骤5：部署到飞牛OS

构建完成后，您将看到一个新的目录：`文件处理工具_飞牛OS版`

将此目录复制到您想在飞牛OS上运行应用的位置，然后执行启动脚本：

```bash
cd /path/to/文件处理工具_飞牛OS版
chmod +x 启动程序.sh  # 确保脚本有执行权限
./启动程序.sh
```

## 注意事项

1. **GUI兼容性**：如果飞牛OS是命令行界面，GUI可能无法正常工作。在这种情况下，您可能需要进一步修改应用程序以提供命令行界面。

2. **权限问题**：确保应用程序有足够的权限访问所需的文件和目录。

3. **工具路径**：如果系统工具（7-Zip和FFmpeg）无法被自动检测到，您可以将它们手动复制到项目的tools目录中。

4. **依赖问题**：如果在运行过程中遇到依赖问题，请检查错误信息并确保所有依赖项都已正确安装。

## 故障排除

### 常见错误及解决方案

1. **找不到Python模块**：
   - 确保已安装所有在requirements.txt中列出的依赖项
   - 尝试使用`pip install --upgrade`更新依赖项

2. **工具未找到**：
   - 确保7-Zip和FFmpeg已正确安装在系统中
   - 检查PATH环境变量是否包含这些工具的路径
   - 尝试将工具可执行文件直接复制到项目的tools目录

3. **权限错误**：
   - 使用`chmod`命令为相关文件添加执行权限
   - 检查应用程序是否有权访问所需的目录

## 支持

如果您在构建或使用过程中遇到任何问题，请检查应用程序的日志文件以获取详细错误信息，并根据错误信息进行排查。

---

祝您在飞牛OS上顺利使用文件处理工具！